<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronicle Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Quill CSS (Text Editor) -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <!-- Flatpickr CSS (The Date Picker) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/material_blue.css">
</head>
<body>

    <header>
        <h1>üìí Note Book</h1>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="üîç Search notes..." onkeyup="filterNotes()">
        </div>
        <button onclick="enableSound()" style="padding: 5px 10px; cursor:pointer;">üîî Enable Audio</button>
    </header>

    <div class="notes-grid" id="notesGrid"></div>

    <button class="fab-btn" onclick="openNewNote()">+</button>

    <!-- MODAL -->
    <div class="modal-overlay" id="noteModal" onclick="closeModal(event)">
        <div class="modal-content" id="modalContent">
            
            <input type="hidden" id="noteId">
            <input type="text" id="editTitle" class="modal-title" placeholder="Note Title...">

            <!-- Rich Text Editor -->
            <div id="editor-container" style="height: 200px; background:white;"></div>

            <!-- SECTION: ATTACHMENTS -->
            <div class="ui-section">
                <h4>üìé Attachments</h4>
                <div style="display:flex; align-items:center; gap:10px;">
                    <button class="tool-btn" onclick="document.getElementById('fileInput').click()">Upload File</button>
                    <span id="fileLabel" style="font-size:0.8rem; color:#666;">No file selected</span>
                    <a href="#" id="downloadLink" class="download-link" target="_blank" style="display:none;">Download</a>
                </div>
                <input type="file" id="fileInput" style="display:none;" onchange="updateFileLabel()">
            </div>
<!-- SECTION: ALARM (UPDATED) -->
            <div class="ui-section">
                <h4>‚è∞ Alarm Settings</h4>
                <div style="display:flex; gap: 10px; align-items: flex-start;">
                    
                    <!-- Date Picker -->
                    <div style="flex-grow: 1;">
                        <input type="text" id="timeInput" class="date-picker-input" placeholder="Select Date & Time...">
                        <div id="countdownBox" style="font-size: 0.8rem; color: #d32f2f; font-weight: bold; margin-top:5px;">
                            ‚è≥ No alarm set
                        </div>
                    </div>

                    <!-- Repeat Count Input-->
                    <div style="display:flex; flex-direction:column; align-items:center;">
                        <label style="font-size:0.7rem; color:#666;">Rings</label>
                        <input type="number" id="repeatInput" min="1" max="10" value="1" 
                               style="width: 50px; padding: 10px; border: 1px solid #ccc; border-radius: 4px; text-align: center;">
                    </div>

                </div>
            </div>

            <!-- FOOTER -->
            <div class="modal-footer">
                <div class="color-picker">
                    <div class="color-dot" style="background:#ffffff" onclick="setColor('#ffffff')"></div>
                    <div class="color-dot" style="background:#ffcdd2" onclick="setColor('#ffcdd2')"></div> <!-- Red -->
                    <div class="color-dot" style="background:#fff9c4" onclick="setColor('#fff9c4')"></div> <!-- Yellow -->
                    <div class="color-dot" style="background:#c8e6c9" onclick="setColor('#c8e6c9')"></div> <!-- Green -->
                    <div class="color-dot" style="background:#b2ebf2" onclick="setColor('#b2ebf2')"></div> <!-- Blue -->
                </div>

                <div style="display:flex; gap:10px;">
                    <button class="tool-btn delete" onclick="deleteCurrentNote()">üóëÔ∏è Delete</button>
                    <button class="tool-btn save" onclick="saveAndClose()">üíæ Save Note</button>
                </div>
            </div>
        </div>
    </div>

    <audio id="alarmSound" src="alarm.mp3"></audio>

    <!-- Libraries -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="js/script.js"></script>
</body>
</html>